{{ extend('src/extension.js') }}
{% extends 'src/cover.twig.tex' %}
{% block packages %}
\usepackage{enumerate}
{{ parent() }}
{% endblock %}


{% block body %}
{# Content #}
  {% import 'src/macros.twig.tex' as mac %}
  {% import _self as body %}

  {# import data and separate the tables  #}
  {% set table2a3 = readCSVRaw('data/2a3.csv') %}
  {% set table4 = readCSVRaw('data/4.csv') %}

  {% set table2 = selectColumns(table2a3, [0,1]) %}
  {% set table3 = selectColumns(table2a3, [0,2]) %}

  {{ body.ohm(table2, "1", 1)}}
  {{ body.ohm(table3, "2.2", 2)}}
  {{ body.power(table4, "5")}}


{% endblock %}

{% macro ohm(data, r, n) %}
  {% import 'src/macros.twig.tex' as mac %}
  {% set table = addColumnMath(data, "round(B/" ~ r ~ ", 3)", 1) %}
  {{editCell(table, 0, 2, "$I_{R" ~ n ~ "}$ (mA)")}}
  {{mac.placeTable(table, "Verification of Ohm's Law using resistor $R_" ~ n ~ "$", "ohm" ~ n)}}
{% endmacro %}

{% macro power(data, v) %}
  {% import 'src/macros.twig.tex' as mac %}
  {% set table = addColumnMath(data, ["round(B*C,3)", "round(" ~ v ~ "*C,3)", "round(100*(B*C)/(" ~ v ~ "*C),2)"], 1) %}
  {{editCell(table, 0,3, "$P_L$ (mW)")}}
  {{editCell(table, 0,4, "$P_{in}$ (mW)")}}
  {{editCell(table, 0,5, "Efficiency (\%)")}}
  {{mac.placeTable(table, "Determination of maximum power transfer", "maxpower")}}
{% endmacro %}
